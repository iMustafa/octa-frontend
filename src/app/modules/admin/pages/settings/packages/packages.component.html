<h2 class='text-center'>Packages</h2>

<section *ngIf='!loading' class="container" matchHeightMax='match'>
  <div style='margin-bottom: 15px'>
    <button md-button class="text-center" (click)='openAddPackageDialog()'>Add Package</button>
  </div>

  <!-- Active Packages Loop -->
  <div *ngFor='let package of packages.active' class='col-lg-3 col-md-4 col-xs-6'>
    <div class="package card match">
      <span class='card-state inactive' (click)='updateStatus(package._id, false)' *ngIf='(package)?.STATE'>Deactivate</span>
      <span class='card-state active' (click)='updateStatus(package._id, true)' *ngIf='!(package)?.STATE'>Activate</span>
      <h5>{{(package)?.NAME}}</h5>
      <ul>
        <li>
          <strong>Reach</strong> <span>{{(package)?.REACH}}</span>
        </li>
        <li>
          <strong>Posts</strong> <span>{{(package)?.POSTS}}</span>
        </li>
        <li>
          <strong>Price</strong> <span>{{(package)?.PRICE}}</span>
        </li>
        <li>
          <strong>Subscribed Customers</strong> <span>{{(package)?.SUBSCRIBED_PAGES.length}}</span>
        </li>
      </ul>
      <div class="text-right">
        <button md-button (click)='openUpdatePackageDialog(package)'>
          <md-icon>mode_edit</md-icon>
          <span>Edit</span>
        </button>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>

  <hr>

  <!-- Inactive Packages Loop -->
  <div *ngFor='let package of packages.suspended' class='col-lg-3 col-md-4 col-xs-6'>
    <div class="package card match">
      <span class='card-state inactive' (click)='updateStatus(package._id, false)' *ngIf='(package)?.STATE'>Deactivate</span>
      <span class='card-state active' (click)='updateStatus(package._id, true)' *ngIf='!(package)?.STATE'>Activate</span>
      <h5>{{(package)?.NAME}}</h5>
      <ul>
        <li>
          <strong>Reach</strong> <span>{{(package)?.REACH}}</span>
        </li>
        <li>
          <strong>Posts</strong> <span>{{(package)?.POSTS}}</span>
        </li>
        <li>
          <strong>Price</strong> <span>{{(package)?.PRICE}}</span>
        </li>
        <li>
          <strong>Subscribed Customers</strong> <span>{{(package)?.SUBSCRIBED_PAGES.length}}</span>
        </li>
      </ul>
      <div class="text-right">
        <button md-button (click)='openUpdatePackageDialog(package)'>
          <md-icon>mode_edit</md-icon>
          <span>Edit</span>
        </button>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>
</section>

<section *ngIf='loading' class='loading text-center'>
  <md-spinner></md-spinner>
</section>

<section *ngIf='failed' class="failed text-center">
  <h3>
    Packages loading failed, please check your connection and try again.
  </h3>
  <button md-button (click)='getPackages()'>Try Again</button>
</section>